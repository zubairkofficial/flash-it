<div class="w-full min-h-screen bg-background ">
    <div class="mx-auto max-w-4xl px-4 py-6">
        <div class="mb-4">
            <a class="text-primary" href="javascript:history.back()">‚Üê Back</a>
        </div>

        <div *ngIf="isLoading" class="text-sm text-primary">Loading...</div>
        <div *ngIf="!isLoading && errorMessage" class="text-sm text-red-600">{{ errorMessage }}</div>

        <div *ngIf="!isLoading && !errorMessage && flashcard" class="space-y-4">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-xl font-semibold">{{ flashcard?.raw_data?.title || 'Flashcard' }}</h2>
                    <div class="text-xs text-text-secondary">Slides: {{ flashcard?.slides?.length || 0 }}</div>
                </div>
            </div>

            <div class="flex gap-2">
                <button class="btn btn-outline btn-sm" [class.btn-primary]="activeTab === 'concise'" (click)="setTab('concise')">Concise</button>
                <button class="btn btn-outline btn-sm" [class.btn-primary]="activeTab === 'standard'" (click)="setTab('standard')">Standard</button>
                <button class="btn btn-outline btn-sm" [class.btn-primary]="activeTab === 'detailed'" (click)="setTab('detailed')">Detailed</button>
            </div>

            <div class="viewer">
                <div class="viewer-card" (touchstart)="onTouchStart($event)" (touchend)="onTouchEnd($event)">
                    <ng-container *ngIf="filteredSlides.length; else empty">
                        <button class="nav nav-left" (click)="prev()" aria-label="Previous slide"><mat-icon>chevron_left</mat-icon></button>
                        <button class="nav nav-right" (click)="next()" aria-label="Next slide"><mat-icon>chevron_right</mat-icon></button>
                        <div class="card-inner">
                            <div class="meta">
                                <div class="count">Slide {{ currentIndex + 1 }} / {{ filteredSlides.length }}</div>
                                <div class="tab-pill">{{ activeTab | uppercase }}</div>
                            </div>
                            <div class="title">{{ filteredSlides[currentIndex]?.title || 'Untitled' }}</div>
                            <div class="content">{{ filteredSlides[currentIndex]?.text }}</div>
                        </div>
                        <div class="dots">
                            <div class="progress">
                                <div class="bar" [style.width.%]="progressPercent"></div>
                            </div>
                        </div>
                    </ng-container>
                    <ng-template #empty>
                        <div class="empty">No slides in this tab.</div>
                    </ng-template>
                </div>
                <div class="actions">
                    <div class="sub-actions">
                        <button class="btn btn-outline btn-sm" type="button">  <mat-icon>edit</mat-icon>Edit</button>
                        <button class="btn btn-outline btn-sm"><mat-icon>delete</mat-icon>Delete</button>
                        <button class="btn btn-outline btn-sm"><mat-icon>save</mat-icon>Save</button>
                    </div>
                    <div class="float-right"></div><button class="btn btn-outline btn-sm"><mat-icon>download</mat-icon>Export</button>
                </div>
            </div>
        </div>
    </div>